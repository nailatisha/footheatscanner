{% extends 'scanner/base.html' %}
{% block title %}Landing | Grad-CAM Foot Visualization Lab{% endblock %}

{% block content %}
<main>

<section id="landing" class="section hero">
  <div class="hero-text">
    <p class="eyebrow">Clinical • Neutral • Transparent</p>
    <h1>Live Grad-CAM Focus from Foot Heat Scanner</h1>
    <p class="subhead">
      Directly linked to the foot heat scanner. No uploads needed.
      See where the model focuses in real time.
    </p>

    <div class="cta-row">
      <a class="btn primary" href="{% url 'scanner' %}">Start Live Scan</a>
      <a class="btn ghost" href="#explainability">Learn about Grad-CAM</a>
    </div>

    <div class="hero-status">
      <span class="pill success">Scanner Connected</span>
      <span class="pill info">Live feed enabled</span>
    </div>

    <div class="disclaimer">
      Visualization tool, not a diagnostic system.
    </div>
  </div>

  <div class="hero-media card glassy">
    <div class="image-frame overlay-sample large"></div>
    <div class="caption">Sample Grad-CAM overlay from the scanner.</div>
  </div>
</section>

<section class="section trio">
  <div class="card small">
    <div class="label">Original input</div>
    <div class="image-frame original-sample"></div>
    <p class="muted">Raw image used as model input.</p>
  </div>

  <div class="card small">
    <div class="label">Grad-CAM heatmap</div>
    <div class="image-frame heatmap-sample"></div>
    <p class="muted">Activation intensity from the model.</p>
  </div>

  <div class="card small">
    <div class="label">Overlay view</div>
    <div class="image-frame overlay-sample"></div>
    <p class="muted">Attention overlay on the original image.</p>
  </div>
</section>

<section id="upload" class="section upload">
  <div class="card upload-card gradient">
    <div class="image-frame placeholder">
      <div class="placeholder-text">Live feed placeholder</div>
    </div>

    <div class="upload-copy">
      <h2>Live feed from Foot Heat Scanner</h2>
      <p>The scanner is connected and ready to stream foot images for Grad-CAM visualization.</p>

      <div class="status-stack">
        <div class="status-row">
          <span class="pill success">Connected</span>
          <span class="muted">USB / BLE link active</span>
        </div>
        <div class="status-row">
          <span class="pill info">Awaiting frame</span>
          <span class="muted">New images visualized automatically</span>
        </div>
        <div class="status-row">
          <span class="pill neutral">No manual upload</span>
          <span class="muted">Data flows directly from scanner</span>
        </div>
      </div>

      <p class="muted">
        No medical decisions are made. This system visualizes model attention only.
      </p>
    </div>
  </div>

  <div class="steps">
    <span class="step active">Landing</span>
    <span class="step active">Live Intake</span>
    <span class="step">Processing</span>
    <span class="step">Results</span>
  </div>
</section>

<section id="processing" class="section processing card">
  <div class="progress">
    <div class="progress-bar" style="width: 65%;"></div>
  </div>
  <h3>Receiving frame & generating activation map</h3>
  <p class="muted">
    Processing images from the foot heat scanner and preparing Grad-CAM visualization.
  </p>
</section>

<section id="results" class="section results">
  <div class="results-grid">

    <div class="card visuals">
      <div class="tab-list">
        <button class="tab active" data-target="view-original">Original Image</button>
        <button class="tab" data-target="view-heatmap">Heatmap Only</button>
        <button class="tab" data-target="view-overlay">Overlay Image</button>
      </div>

      <div class="tab-panels">
        <div id="view-original" class="tab-panel active">
          <div class="image-frame original-sample"></div>
          <div class="caption">Original input image.</div>
        </div>

        <div id="view-heatmap" class="tab-panel">
          <div class="image-frame heatmap-sample"></div>
          <div class="caption">Regions with higher activation intensity.</div>
        </div>

        <div id="view-overlay" class="tab-panel">
          <div class="image-frame overlay-sample"></div>
          <div class="caption">Grad-CAM overlay on original image.</div>
        </div>
      </div>
    </div>

    <div class="card outputs">
      <h3>Model Outputs</h3>

      <div class="output-row">
        <div class="label">Predicted class</div>
        <div class="value">Heel Region Attention</div>
      </div>

      <div class="output-row">
        <div class="label">Confidence</div>
        <div class="value">82%</div>
        <div class="confidence-bar">
          <div class="confidence-fill" style="width: 82%;"></div>
        </div>
      </div>

      <div class="output-note">
        <p>This visualization shows where the model focused.</p>
        <p class="muted">Attention does not equal diagnosis.</p>
      </div>

      <div class="footnote">
        Heatmap colors are derived from Grad-CAM output.
      </div>
    </div>

  </div>
</section>

<section id="explainability" class="section explain">
  <div class="card explain-banner">
    <div class="image-frame overlay-sample large"></div>

    <div class="legend">
      <span class="legend-label">Low attention</span>
      <div class="legend-bar">
        <span class="legend-grad"></span>
      </div>
      <span class="legend-label">High attention</span>
    </div>
  </div>

  <div class="explain-cards">
    <div class="card">
      <h3>What is Grad-CAM?</h3>
      <p>
        A technique that highlights which image regions most influenced
        the model’s prediction.
      </p>
    </div>

    <div class="card">
      <h3>What this visualization shows</h3>
      <p>
        Areas where the model placed greater attention during inference.
      </p>
    </div>
  </div>
</section>

<section id="history" class="section history">
  <div class="section-header">
    <h2>Demo / Sample History</h2>
    <p class="muted">Sample visualizations for demonstration only.</p>
  </div>

  <div class="history-grid">
    <div class="card history-item">
      <div class="badge">Sample</div>
      <div class="image-frame overlay-sample small"></div>
      <div class="label">Arch Focus</div>
      <div class="muted">Confidence: 76%</div>
    </div>

    <div class="card history-item">
      <div class="badge">Sample</div>
      <div class="image-frame overlay-sample small alt1"></div>
      <div class="label">Toe Focus</div>
      <div class="muted">Confidence: 64%</div>
    </div>

    <div class="card history-item">
      <div class="badge">Sample</div>
      <div class="image-frame overlay-sample small alt2"></div>
      <div class="label">Heel Focus</div>
      <div class="muted">Confidence: 81%</div>
    </div>
  </div>
</section>

</main>
{% endblock %}
